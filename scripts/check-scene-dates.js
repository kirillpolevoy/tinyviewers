import { createClient } from "@supabase/supabase-js"; import dotenv from "dotenv"; import path from "path"; import { fileURLToPath } from "url"; const __filename = fileURLToPath(import.meta.url); const __dirname = path.dirname(__filename); dotenv.config({ path: path.join(__dirname, "..", ".env.local") }); const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY); console.log("ðŸ• CHECKING SCENES DATA TIMESTAMPS"); console.log("================================="); const { data: recentScenes, error } = await supabase.from("scenes").select("id, movie_id, intensity_2y, created_at, movies(title)").not("intensity_2y", "is", null).order("created_at", { ascending: false }).limit(20); if (error) { console.error("Error:", error); process.exit(1); } console.log("ðŸ“Š Most Recent 20 Claude Analysis Scenes:"); recentScenes.forEach((scene, i) => { const date = new Date(scene.created_at).toLocaleDateString(); const time = new Date(scene.created_at).toLocaleTimeString(); console.log(`[${i+1}] ${scene.movies.title} - ${date} ${time} (intensity: ${scene.intensity_2y})`); }); console.log(`
Oldest scene from this sample: ${new Date(recentScenes[recentScenes.length-1]?.created_at).toLocaleDateString()}`); console.log(`Newest scene from this sample: ${new Date(recentScenes[0]?.created_at).toLocaleDateString()}`);
