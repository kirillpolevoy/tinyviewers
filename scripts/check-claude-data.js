import { createClient } from "@supabase/supabase-js"; import dotenv from "dotenv"; import path from "path"; import { fileURLToPath } from "url"; const __filename = fileURLToPath(import.meta.url); const __dirname = path.dirname(__filename); dotenv.config({ path: path.join(__dirname, "..", ".env.local") }); const supabase = createClient(process.env.NEXT_PUBLIC_SUPABASE_URL, process.env.SUPABASE_SERVICE_ROLE_KEY); console.log("ðŸŽ¬ MOVIES WITH CLAUDE ANALYSIS"); console.log("=============================="); const { data, error } = await supabase.from("movies").select("id, title, scenes(id, scene_number)").not("scenes", "is", null); if (error) { console.error("Error:", error); process.exit(1); } console.log(`Found ${data.length} movies with Claude scenes:`); data.forEach((movie, i) => { const sceneCount = movie.scenes ? movie.scenes.length : 0; console.log(`[${i+1}] ${movie.title} - ${sceneCount} scenes`); });
